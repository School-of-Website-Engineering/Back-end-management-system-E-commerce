"use strict";(self["webpackChunkBack_end_management_system_E_commerce"]=self["webpackChunkBack_end_management_system_E_commerce"]||[]).push([[809],{3809:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),t("el-breadcrumb-item",[e._v("商品管理")]),t("el-breadcrumb-item",[e._v("商品分类")])],1),t("br"),t("el-card",[t("el-alert",{attrs:{title:"注意：商品参数只能添加三级分类",type:"warning",closable:"","show-icon":""}}),t("br"),t("el-row",{staticClass:"cat_opt"},[t("span",[e._v("选择商品分类:")]),t("el-cascader",{attrs:{options:e.catList,props:{expandTrigger:"hover",...e.cateProps}},on:{change:e.handleChange},model:{value:e.SelectedCateKeys,callback:function(t){e.SelectedCateKeys=t},expression:"SelectedCateKeys"}})],1),t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[t("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isBtnDisabled},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加参数")]),t("br"),t("br"),t("el-table",{attrs:{data:e.manyTableData,border:"",stripe:""}},[t("el-table-column",{attrs:{type:"expand"}}),t("el-table-column",{attrs:{type:"index",label:"#"}}),t("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function({}){return[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"}},[e._v("删除")])]}}])})],1)],1),t("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[t("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isBtnDisabled},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加属性")]),t("br"),t("br"),t("el-table",{attrs:{data:e.onlyTableData,border:"",stripe:""}},[t("el-table-column",{attrs:{type:"expand"}}),t("el-table-column",{attrs:{type:"index",label:"#"}}),t("el-table-column",{attrs:{label:"属性名称",prop:"attr_name"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function({}){return[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"}},[e._v("删除")])]}}])})],1)],1)],1)],1),t("el-dialog",{attrs:{title:`添加${e.title}`,visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[t("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:e.title,prop:"attr_name"}},[t("el-input",{model:{value:e.addForm.attr_name,callback:function(t){e.$set(e.addForm,"attr_name",t)},expression:"addForm.attr_name"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],s={data(){return{catList:[],cateProps:{value:"cat_id",label:"cat_name",children:"children"},SelectedCateKeys:[],activeName:"many",manyTableData:[],onlyTableData:[],addDialogVisible:!1,addForm:{attr_name:""},addFormRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]}}},created(){this.getParamsList()},methods:{async getParamsList(){const{data:e}=await this.$http.get("categories");if(200!==e.meta.status)return this.$message.error("获取商品分类列表失败");this.catList=e.data},handleChange(){this.getParamsData()},handleClick(){this.getParamsData()},async getParamsData(){const{data:e}=await this.$http.get(`categories/${this.cateId}/attributes`,{params:{sel:this.activeName}});if(200!==e.meta.status)return this.$message.error("获取参数列表失败");"many"===this.activeName?this.manyTableData=e.data:this.onlyTableData=e.data},addDialogClosed(){this.$refs.addFormRef.resetFields()}},computed:{isBtnDisabled(){return 3!==this.SelectedCateKeys.length},cateId(){return this.SelectedCateKeys[2]},title(){return"many"===this.activeName?"动态参数":"静态属性"}}},r=s,n=a(1001),o=(0,n.Z)(r,l,i,!1,null,"c9cdc086",null),d=o.exports}}]);
//# sourceMappingURL=809.e365761a.js.map